<link href="~/Content/Quiz.css" rel="stylesheet" />

<div id="quiz">
</div>
<button id="submit">Visa resultat</button>
<div id="results"></div>

<button onClick="window.location.reload();">Spela igen</button>


<script>
        var Quiz = [
            {
                question: "Vilken landskapsblomma har Uppland?",
                answers: {
                    A: 'Ginst',
                    B: 'Linnea',
                    C: 'Kungsängslilja',
                    D: 'Skogsstjärna'
                },
                correctAnswer: 'C'
            },

            {
                question: "Vilken av dessa är INTE en så kallad uteväxt?",
                answers: {
                    A: 'Fiolfikus',
                    B: 'Ljung',
                    C: 'Dahlia',
                    D: 'Petunia'
                },
                correctAnswer: 'A'
            },

            {
                question: "Vilken landskapsblomma har Närke?",
                answers: {
                    A: 'Kungsspira',
                    B: 'Blåklint',
                    C: 'Fjällsippa',
                    D: 'Gullviva'
                },
                correctAnswer: 'D'
            },

            {
                question: "När på året infaller tulpanens dag?",
                answers: {
                    A: '1 maj',
                    B: '15 januari',
                    C: '30 juni',
                    D: '14 oktober'
                },
                correctAnswer: 'B'
            },

            {
                question: "Vilken landskapsblomma har Gotland?",
                answers: {
                    A: 'Mistel',
                    B: 'Liljekonvalj',
                    C: 'Smörboll',
                    D: 'Murgröna'
                },
                correctAnswer: 'D'
            },

            {
                question: "När på året infaller rosens dag?",
                answers: {
                    A: '14 februari',
                    B: '23 november',
                    C: '2 juli',
                    D: '10 december'
                },
                correctAnswer: 'C'
            },

            {
                question: "Vilken är Södermanlands landskapsblomma?",
                answers: {
                    A: 'Förgätmigej',
                    B: 'Vit näckros',
                    C: 'Åkerbär',
                    D: 'Mossippa'
                },
                correctAnswer: 'B'
            }
        ];

        var quizContainer = document.getElementById('quiz');
        var resultsContainer = document.getElementById('results');
        var submitButton = document.getElementById('submit');

        generateQuiz(Quiz, quizContainer, resultsContainer, submitButton);

        function generateQuiz(questions, quizContainer, resultsContainer, submitButton) {

            function showQuestions(questions, quizContainer) {
                // we'll need a place to store the output and the answer choices
                var output = [];
                var answers;

                // for each question...
                for (var i = 0; i < questions.length; i++) {

                    // first reset the list of answers
                    answers = [];

                    // for each available answer...
                    for (letter in questions[i].answers) {

                        // ...add an html radio button
                        answers.push(
                            '<label>'
                            + '<input type="radio" name="question' + i + '" value="' + letter + '">'
                            + letter + ': '
                            + questions[i].answers[letter]
                            + '</label>'
                        );
                    }

                    // add this question and its answers to the output
                    output.push(
                        '<div class="question">' + questions[i].question + '</div>'
                        + '<div class="answers">' + answers.join('') + '</div>'
                    );
                }

                // finally combine our output list into one string of html and put it on the page
                quizContainer.innerHTML = output.join('');
            }


            function showResults(questions, quizContainer, resultsContainer) {

                // gather answer containers from our quiz
                var answerContainers = quizContainer.querySelectorAll('.answers');

                // keep track of user's answers
                var userAnswer = '';
                var numCorrect = 0;

                // for each question...
                for (var i = 0; i < questions.length; i++) {

                    // find selected answer
                    userAnswer = (answerContainers[i].querySelector('input[name=question' + i + ']:checked') || {}).value;

                    // if answer is correct
                    if (userAnswer === questions[i].correctAnswer) {
                        // add to the number of correct answers
                        numCorrect++;

                        // color the answers green
                        answerContainers[i].style.color = 'green';
                    }
                    // if answer is wrong or blank
                    else {
                        // color the answers red
                        answerContainers[i].style.color = 'red';
                    }
                }

                // show number of correct answers out of total
                resultsContainer.innerHTML = numCorrect + ' av ' + questions.length + ' poäng ';
            }

            // show questions right away
            showQuestions(questions, quizContainer);

            // on submit, show results
            submitButton.onclick = function () {
                showResults(questions, quizContainer, resultsContainer);
            }

        }
</script>
